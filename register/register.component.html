<div class="container mt-4">
    <h2 class="text-center">Registration Form</h2>

    <form [formGroup]="registrationForm" (ngSubmit)="submitForm()">

        <!-- Step 1: Personal Info -->
        <div *ngIf="currentStep === 1" [formGroup]="personal">
            <h4>Personal Information</h4>
            <div class="mb-3">
                <label>Name</label> &nbsp;
                <input type="text" class="form-control" formControlName="name" autocomplete="username" />
                <div *ngIf="personal.get('name')?.touched && personal.get('name')?.invalid" class="text-danger">
                    Name is required
                </div>
            </div>

            <div class="mb-3">
                <label>Email</label> &nbsp;
                <input type="email" class="form-control" formControlName="email" />
                <div *ngIf="personal.get('email')?.touched && personal.get('email')?.invalid" class="text-danger">
                    Valid email is required
                </div>
            </div>
        </div>

        <!-- Step 2: Academic Info -->
        <div *ngIf="currentStep === 2" [formGroup]="academic">
            <h4>Academic Information</h4>
            <div class="mb-3">
                <label>Department</label> &nbsp;
                <select class="form-select" formControlName="department">
                    <option value="" disabled>Select Department</option>
                    <option *ngFor="let dept of departmentList" [value]="dept.id">{{ dept.id }}</option>
                </select>
                <div *ngIf="academic.get('department')?.touched && academic.get('department')?.invalid"
                    class="text-danger">
                    Department is required
                </div>
            </div>

            <div class="mb-3">
                <label>Year</label> &nbsp;
                <input type="number" class="form-control" formControlName="year" />
                <div *ngIf="academic.get('year')?.touched && academic.get('year')?.invalid" class="text-danger">
                    Year must be between 1 and 5
                </div>
            </div>
        </div>

        <!-- Step 3: Credentials -->
        <div *ngIf="currentStep === 3" [formGroup]="credentials">
            <h4>Account Credentials</h4>
            <div class="mb-3">
                <label>Username</label> &nbsp;
                <input type="text" class="form-control" formControlName="username" />
                <div *ngIf="credentials.get('username')?.touched && credentials.get('username')?.invalid"
                    class="text-danger">
                    Username is required
                </div>
            </div>

            <div class="mb-3">
                <label>Password</label> &nbsp;
                <input type="password" class="form-control" formControlName="password" autocomplete="new-password" />
                <div *ngIf="credentials.get('password')?.touched && credentials.get('password')?.invalid"
                    class="text-danger">
                    Minimum 6 characters required
                </div>
            </div>

            <div class="mb-3">
                <label>Confirm Password</label> &nbsp;
                <input type="password" class="form-control" formControlName="confirmPassword"
                    autocomplete="new-password" />
                <div *ngIf="credentials.hasError('mismatch') && credentials.touched" class="text-danger">
                    Passwords do not match
                </div>
            </div>
        </div>

        <!-- Navigation Buttons -->
        <div class="mt-4">
            <button type="button" class="btn btn-secondary me-2" (click)="prevStep()"
                *ngIf="currentStep > 1">Back</button>
                <br>
            <button type="button" class="btn btn-primary me-2" (click)="nextStep()"
                *ngIf="currentStep < 3">Next</button>
                <br>
            <button type="submit" class="btn btn-success" *ngIf="currentStep === 3">Submit</button>
        </div>
    </form>
</div>